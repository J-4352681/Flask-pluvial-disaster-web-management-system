{% extends "generic/base.html" %}

{% block title %}Usuarios{% endblock %}

{% block navbar %}
    {% include "generic/navbar.html" %} 
{% endblock %}

{% block content %}
  {% with titulo_apartado="Edición del usuario "+param_wrapper.item_type, subtitulo_apartado="Edición de "+param_wrapper.item_name %}
    {% include "generic/generic_content.html" %}
  {% endwith %}

  <form class="row mx-1" action="{{ param_wrapper.action_url }}" method="POST">
    {{ param_wrapper.form.hidden_tag() }}
    <div class="col">
      {% for field, errors in param_wrapper.form.errors.items() %}
        <div class="row alert alert-error bg-danger text-white">
          {{ param_wrapper.form[field].label(class="col") }}: {{ ', '.join(errors) }}
        </div>
      {% endfor %}
  
      {% for field in param_wrapper.form %}
      {% if field.name not in ["submit", "csrf_token", "id"] %}

        <section class="border-bottom row col-6 pb-3">
          {% if field.data is boolean %}
            <div class="row">
              {{ field.label(class="col my-2 p-0") }}
              {{ field(class="col m-2 p-2 card h-50") }}
            </div>
            
          {% else %}
            <div class="row">
              {{ field.label(class="col my-2 p-0") }}
            </div>

            {% if field.choices %}
              <script src="{{ url_for('static', filename='checkbox.js') }}"></script>
              <select class="row" name="{{ field.name }}" multiple>
              {% for k, v in field.choices.items() %}
                <option class="col-auto mr-2" value="{{ k }}" {% if k in field.default %} selected{% endif %}>{{ v }}</option>
              {% endfor %}
              </select>
            {% else %}

              <div class="row">
                {{ field(class="col my-2 form-control") }}
              </div>
            {% endif %}
          {% endif %}
        </section>

      {% endif %}
      {% endfor %}
          
      <div class="row my-2">
        {{ param_wrapper.form.submit(class="col-auto m-auto btn btn-primary") }}
      </div>
    </div>
    
  </form>

{% endblock %}
