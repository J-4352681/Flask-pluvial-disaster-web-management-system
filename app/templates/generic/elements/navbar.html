<nav id="navbar" class="navbar position-fixed w-100 navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <a class="navbar-brand mx-3 btn p-0 col-auto m-auto text-decoration-none" href="{{ url_for('home') }}"><ion-icon class="nav-icon" name="water"></ion-icon></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menuNavbar" aria-controls="menuNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="menuNavbar">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                {% for apartado in get_navigation_actions(session) %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ apartado.url }}">{{ apartado.nombre }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <div id="nav-user-icon" class="mx-3 btn p-0 col-auto m-auto text-decoration-none"><ion-icon class="nav-icon" name="person"></ion-icon></div>

        <div id="nav-drop-menu" class="position-fixed container card shadow-sm">
          <a class="row text-decoration-none text-secondary" href="{{ url_for('profile_index') }}">
            <p class="col my-3">Perfil</p>
          </a>
      
          <a class="row text-decoration-none border-top text-secondary" href="{{ url_for('auth_logout') }}">
            <p class="col my-3">Cerrar sesi√≥n</p>
          </a>
        </div>
    </div>
</nav>

<script>
  $(document).ready(function() {
    let menu = $('#nav-drop-menu'), menu_width =  menu.outerWidth(true);
    let u_icon = $('#nav-user-icon'), u_icon_width = u_icon.outerWidth(true), u_icon_height = u_icon.outerHeight(true), u_icon_pos = u_icon.position();
    let navbar = $('#navbar'), nv_height = navbar.outerHeight(true);

    menu.css('left', u_icon_pos.left - menu_width + u_icon_width/2 + 'px');
    menu.css('top', u_icon_pos.top + nv_height + 'px');

    u_icon.click(function() {
      if(menu.css('visibility') == 'hidden') menu.css('visibility', 'visible');
      else menu.css('visibility', 'hidden');
    });

    nv_height_inc = nv_height + 50;

    $('.mt-navbar')
    .css('margin-top', nv_height_inc + 'px');
  });
</script>
